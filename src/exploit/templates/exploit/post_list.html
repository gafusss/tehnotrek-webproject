{% extends "core/base.html" %}
{% load static %}
{% block head %}
<link href="{% static 'exploit/chosen.css' %}" rel="stylesheet">
<script src="{% static 'core/chosen/chosen.jquery.js' %}"></script>
<link rel="stylesheet" href="{% static 'core/chosen/chosen.css' %}">
<script src="{% static 'exploit/new_post_chosen.js' %}"></script>
{% endblock %}
{% block title %}<h1>Список эксплоитов</h1>{% endblock %}
{% block content %}
<h3>Фильтр и сортировка:</h3>
<form id="form-exploits-filter" action="">
    {{ form.error }}
    {{form.search.label }}: {{ form.search }} {{form.search.errors}}
    {{form.sort.label }}: {{ form.sort }} {{form.sort.errors}}
    {{form.reverse.label }}{{ form.reverse }} {{form.reverse.errors}}
    {{ form.confirmed_only.label}}{{form.confirmed_only}}{{form.confirmed_only.errors}}
    {{ form.exploittype.label}}: {{form.exploittype}}{{form.exploittype.errors}}
    {{ form.tags.label}}: {{form.tags}}{{form.tags.errors}}
    <input type="submit" value="Применить">
    <a href="{{ request.path }}">Сброс</a>
</form>
<table>
    <tr>
        <th>Дата публикации</th>
        <th>Скачать</th>
        <th><span class="span-exploit-confirmed">&#x2713;</span></th>
        <th>Название</th>
        <th>CVE-ID</th>
        <th>Платформа</th>
        <th>Автор</th>
        <th>Теги</th>
    </tr>
    {% for post in object_list %}
<tr>
    <td>
        {{post.published}}
    </td>
    <td>
        <a href="{{post.attachment_file.url}}">Скачать</a>
    </td>
    <td>
        {% if post.confirmed %}<span class="span-exploit-confirmed">&#x2713;</span>{% else %}<span class="span-exploit-not-confirmed">&#x274c;</span>{% endif %}
    </td>
    <td>
        <a href="{% url 'exploit:post' pk=post.pk %}">{{post.title}}</a>
    </td>
    <td>
        {% if post.cve_id %}CVE-{{ post.cve_id }}{% else %}нет{% endif %}
    </td>
    <td>
        {{post.platform}}
    </td>
    <td>
        {{post.author}}
    </td>
    <td>
        {{post.tag_count}}
    </td>
</tr>
    {% endfor %}
</table>
{% endblock %}
