<div id="div-comments-cent-data"
     data-cent-url="{{ CENTRIFUGE_SOCKJS_ENDPOINT }}"
     data-cent-user="{{ CENTRIFUGE_USER }}"
     data-cent-ts="{{ CENTRIFUGE_TIMESTAMP }}"
     data-cent-info="{{ CENTRIFUGE_INFO }}"
     data-cent-token="{{ CENTRIFUGE_TOKEN }}"
     data-cent-channel="{{ object.get_cent_answers_channel_name }}"
>
</div>

<table id="comment-table"></table>

{% for comment in object.comments.all %}
{% if not comment.parent_comment %}
{% include 'comments/comment.html' with show_replies=True %}
{% endif %}
{% endfor %}
{% if user.is_authenticated %}
<form name="newcomment" id="form-comment-new" action="{% url 'exploit:comment' pk=object.pk %}" method="POST">
    {% csrf_token %}
    <p><strong>Новый комментарий:</strong></p>
    {% if parent_comment %}
    <section id="section-comment-reply-preview">
        В ответ на: {% include 'comments/comment.html' with comment=parent_comment show_replies=False %}
        <a id="a-comment-new-clear" href="{{ request.path }}#form-comment-new"
           onclick="commentClearReplyTo(); return false;">Очистить</a>
    </section>
    {% endif %}
    <textarea id="textarea-comment-new" cols="60" rows="10" name="text" placeholder="Комментарий"></textarea>
    <input type="hidden" name="parent_post" value="{{ object.id }}">
    <input id="input-comment-new-parent-comment" type="hidden" name="parent_comment" value="{{ parent_comment.id }}">
    <input id="input-comment-new-submit" type="submit" value="Отправить"
           onclick="sendComment('{% url 'exploit:commentAjax' pk=object.pk %}'); return false;">
</form>
{% endif %}